<!DOCTYPE html>
<html>
<head>
    <title>AI Interview Simulator</title>
</head>
<body>

    <h1>AI Interview Simulator</h1>

    <form id="interviewForm">
        <div id="questions"></div>
        <br>
        <button type="submit">Submit Answers</button>
    </form>

    <h2 id="result"></h2>

<script>
async function loadQuestions() {
    const response = await fetch('/questions');
    const questions = await response.json();

    const container = document.getElementById("questions");

    questions.forEach(q => {
        const div = document.createElement("div");
        div.innerHTML = `
            <p><strong>${q.question}</strong></p>
            <input type="text" name="answer" style="width:400px"><br><br>
        `;
        container.appendChild(div);
    });
}

document.getElementById("interviewForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    const inputs = document.querySelectorAll("input[name='answer']");
    const answers = [];

    inputs.forEach(input => {
        answers.push(input.value);
    });

    const response = await fetch('/evaluate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ answers: answers })
    });

    const result = await response.json();

    document.getElementById("result").innerText =
        `Final Score: ${result.score}/${result.total}`;
});

loadQuestions();
</script>

</body>
</html>